{"ast":null,"code":"var _jsxFileName = \"/Users/Edwin/Desktop/Course_work/Fitness-Trakr-Front-/src/components/MyRoutines.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Link } from \"react-router-dom\";\nimport { SingleRoutine } from './';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst {\n  REACT_APP_BASE_URL = 'https://fitnesstrac-kr.herokuapp.com/api'\n} = process.env;\n\nconst MyRoutines = ({\n  username,\n  token,\n  setMyRoutines,\n  myRoutines\n}) => {\n  _s();\n\n  const [name, setName] = useState('');\n  const [goal, setGoal] = useState('');\n  const [isPublic, setIsPublic] = useState(false);\n\n  const fetchMyRoutines = async () => {\n    try {\n      if (username) {\n        const resp = await fetch(`${REACT_APP_BASE_URL}/users/${username}/routines`, {\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        console.log(\"<<<<\", resp);\n        const data = await resp.json();\n\n        if (data) {\n          setMyRoutines(data);\n        } else {\n          setMyRoutines([]);\n        }\n      }\n\n      return;\n    } catch (error) {\n      console.error(error);\n    }\n\n    ;\n  };\n\n  const updateRoutine = async (name, goal, routineId) => {\n    const field = {};\n    const updateName = prompt('Name: ', name);\n    const updateGoal = prompt('Goal: ', goal);\n\n    if (updateName) {\n      fields.name = updateName;\n    }\n\n    if (updateGoal) {\n      fields.goal = updateGoal;\n    }\n\n    try {\n      const resp = await fetch(`${REACT_APP_BASE_URL}/routines/${routineId}`, {\n        method: \"PATCH\",\n        header: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${token}`\n        },\n        body: JSON.stringify(fields)\n      });\n    } catch (error) {\n      console.error(error);\n      alert(error);\n    }\n  };\n\n  const handleDelete = async routineId => {\n    try {\n      await fetch(`${REACT_APP_BASE_URL}/routines/${routineId}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      await fetchMyRoutines();\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n\n    try {\n      const resp = await fetch(`${REACT_APP_BASE_URL}/routines`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          name,\n          goal,\n          isPublic\n        })\n      });\n      const data = await resp.json();\n\n      if (data) {\n        setName('');\n        setGoal('');\n        setIsPublic(false);\n        await fetchMyRoutines();\n      }\n\n      return;\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  useEffect(() => {\n    try {\n      fetchMyRoutines();\n    } catch (error) {\n      console.error(error);\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Create new routine:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Routine\",\n          onChange: event => setName(event.target.value),\n          value: name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Goal\",\n          onChange: event => setGoal(event.target.value),\n          value: goal\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Private?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          onChange: event => setIsPublic(event.target.value),\n          value: isPublic,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"true\",\n            children: \"Yes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"false\",\n            children: \"No\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: !goal || !name,\n          children: \"Create new routine\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 13\n        }, this), myRoutines.length > 0 ? myRoutines.map(routine => {\n          return /*#__PURE__*/_jsxDEV(SingleRoutine, {\n            routine: routine,\n            children: [/*#__PURE__*/_jsxDEV(Link, {\n              to: `/routines/${routine.id}`,\n              className: \"detail_butn\",\n              children: \"Details\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleDelete(routine.id),\n              children: \"Delete Routine\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 29\n            }, this)]\n          }, routine.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 28\n          }, this);\n        }) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 5\n    }, this)\n  }, void 0, false);\n};\n\n_s(MyRoutines, \"VBtkyciYiNsPpB6BudOKo8RtGTM=\");\n\n_c = MyRoutines;\nexport default MyRoutines;\n\nvar _c;\n\n$RefreshReg$(_c, \"MyRoutines\");","map":{"version":3,"sources":["/Users/Edwin/Desktop/Course_work/Fitness-Trakr-Front-/src/components/MyRoutines.js"],"names":["React","useState","useEffect","Link","SingleRoutine","REACT_APP_BASE_URL","process","env","MyRoutines","username","token","setMyRoutines","myRoutines","name","setName","goal","setGoal","isPublic","setIsPublic","fetchMyRoutines","resp","fetch","headers","console","log","data","json","error","updateRoutine","routineId","field","updateName","prompt","updateGoal","fields","method","header","body","JSON","stringify","alert","handleDelete","handleSubmit","event","preventDefault","target","value","length","map","routine","id"],"mappings":"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","sourcesContent":["\nimport React, {useState, useEffect} from 'react';\nimport { Link} from \"react-router-dom\";\n\nimport { SingleRoutine } from './'\nconst { REACT_APP_BASE_URL = 'https://fitnesstrac-kr.herokuapp.com/api' } = process.env;\n\nconst MyRoutines = ({username, token, setMyRoutines, myRoutines}) => {\n    const [name, setName] = useState('');\n    const [goal, setGoal] = useState('');\n    const [isPublic, setIsPublic] = useState(false)\n\n    const fetchMyRoutines = async () => {\n        \n        try {\n            if(username) {\n                const resp = await fetch (`${REACT_APP_BASE_URL}/users/${username}/routines`, {\n                    headers: {\n                        'Content-Type': 'application/json',\n                        'Authorization': `Bearer ${token}`\n                    },\n                })\n                console.log(\"<<<<\", resp)\n                const data = await resp.json();\n                if (data) {\n                    setMyRoutines(data);\n                } else {\n                    setMyRoutines([]);\n                }\n            }\n            return\n            \n        } catch (error) {\n            console.error(error)\n        };\n    };\n\n    const updateRoutine = async (name, goal, routineId) => {\n        const field = {};\n        const updateName = prompt('Name: ', name);\n        const updateGoal = prompt('Goal: ', goal);\n        if(updateName) {\n            fields.name = updateName;\n        }\n        if(updateGoal) {\n            fields.goal = updateGoal;\n        }\n        try {\n            const resp = await fetch (`${REACT_APP_BASE_URL}/routines/${routineId}`, {\n                method: \"PATCH\",\n                header: {\n                    \"Content-Type\": \"application/json\",\n                    \"Authorization\": `Bearer ${token}`\n                },\n                body: JSON.stringify(fields)\n            })\n            \n        } catch (error) {\n            console.error(error)\n            alert(error)\n        }\n    }\n\n    const handleDelete = async (routineId) => {\n        try {\n            await fetch(`${REACT_APP_BASE_URL}/routines/${routineId}`, {\n               method: 'DELETE',\n               headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${token}`\n               }\n            })\n            await fetchMyRoutines();\n            \n        } catch (error) {\n            console.error(error)\n        }\n    }\n\n    const handleSubmit = async (event) => {\n        event.preventDefault();\n        try {\n            const resp = await fetch(`${REACT_APP_BASE_URL}/routines`, {\n               method: 'POST',\n               headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${token}`\n               }, body: JSON.stringify ({name, goal, isPublic})\n            })\n            const data = await resp.json();\n            if(data) {\n                setName('');\n                setGoal('');\n                setIsPublic(false);\n                await fetchMyRoutines();\n            }\n            return;\n            \n        } catch (error) {\n            console.error(error)\n        }\n    }\n\n    useEffect(() => {\n        try {\n            fetchMyRoutines();\n        } catch (error) {\n            console.error(error)\n        }\n    }, [])\n\n    return <>\n    <div>\n        <h3>Create new routine:</h3>\n        <form onSubmit = {handleSubmit}>\n            <input type = 'text' placeholder = 'Routine' onChange = {(event) => setName(event.target.value)} value = {name}/>\n            <hr></hr>\n            <input type = 'text' placeholder = 'Goal' onChange = {(event) => setGoal(event.target.value)} value = {goal}/>\n            <label>Private?</label>\n            <select onChange= {(event) => setIsPublic(event.target.value)} value = {isPublic}>\n                <option value='true'>Yes</option>\n                <option value='false'>No</option>\n            </select>\n            <button type = 'submit' disabled = {!goal || !name}>Create new routine</button>\n            \n        {\n            myRoutines.length > 0 \n            ? myRoutines.map(routine => {\n                    return <SingleRoutine key = {routine.id} routine = {routine}>\n                        <Link to = {`/routines/${routine.id}`} className='detail_butn'>Details</Link>\n                        {\n                            <button onClick = {() => handleDelete(routine.id)}>Delete Routine</button>\n                        }\n                        \n\n                    </SingleRoutine>\n                }) : null\n        }\n        </form>\n    </div>\n        </>\n\n\n\n\n}\nexport default MyRoutines;"]},"metadata":{},"sourceType":"module"}